<mat-card-title>{{ title }}</mat-card-title>

<mat-dialog-content>
  <form [formGroup]="plantForm" (ngSubmit)="onSubmitPlant()">
    
    <!-- Champ Name -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" type="text" />
      <mat-error *ngIf="isSubmitted && name?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
      <mat-error *ngIf="isSubmitted && name?.errors?.['minlength']">
        Minimum 3 caractères.
      </mat-error>
    </mat-form-field>

    <!-- Champ Type -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Type</mat-label>
      <mat-select formControlName="type">
        <mat-option *ngFor="let type of plantTypes" [value]="type.id">
          {{ type.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="isSubmitted && type?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
    </mat-form-field>

    <!-- Champ Image -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Image</mat-label>
      <input matInput formControlName="image" type="text" />
      <mat-error *ngIf="isSubmitted && image?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
      <mat-error *ngIf="isSubmitted && image?.errors?.['minlength']">
        Minimum 3 caractères.
      </mat-error>
    </mat-form-field>

    <!-- Champ Description -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Description</mat-label>
      <input matInput formControlName="description" type="text" />
      <mat-error *ngIf="isSubmitted && description?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
      <mat-error *ngIf="isSubmitted && description?.errors?.['minlength']">
        Minimum 3 caractères.
      </mat-error>
    </mat-form-field>

    <!-- Champ Début Récolte -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Début de la récolte</mat-label>
      <mat-select formControlName="deb_recolte">
        <mat-option *ngFor="let mois of plantMois" [value]="mois.id">
          {{ mois.libelle }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Champ Fin Récolte (corrigé : formControlName="fin_recolte") -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Fin de la récolte</mat-label>
      <mat-select formControlName="fin_recolte">
        <mat-option *ngFor="let mois of plantMois" [value]="mois.id">
          {{ mois.libelle }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Champ Besoin Soleil -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Ensoleillement</mat-label>
      <mat-select formControlName="besoin_soleil">
        <mat-option *ngFor="let besoin of plantBesoinSoleil" [value]="besoin.id">
          {{ besoin.name }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="isSubmitted && besoin_soleil?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
    </mat-form-field>

    <!-- Champ Fréquence Arrosage -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Fréquence d'arrosage (j)</mat-label>
      <input matInput formControlName="freq_arrosage" type="text" />
      <mat-error *ngIf="isSubmitted && freq_arrosage?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
    </mat-form-field>

    <!-- Champ Famille -->
    <mat-form-field appearance="outline" class="w-100 mb-16">
      <mat-label>Famille</mat-label>
      <mat-select formControlName="famille">
        <mat-option *ngFor="let famille of plantFamille" [value]="famille.id">
  {{ famille.name }}
</mat-option>
      </mat-select>
      <mat-error *ngIf="isSubmitted && famille?.errors?.['required']">
        Ce champ est requis.
      </mat-error>
    </mat-form-field>

  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close type="button">Annuler</button>
  <button mat-raised-button color="accent" 
          [disabled]="plantForm.invalid" 
          type="button" 
          (click)="onSubmitPlant()">
    {{ mode === 'add' ? 'Insérer' : 'Modifier' }}
  </button>
</mat-dialog-actions>